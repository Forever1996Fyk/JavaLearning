## Redis-主从复制

我们知道Redis提供了持久化方案, 保证数据的安全性, 即使Redis服务故障, 也不会丢失数据, 因为Redis将内存中的数据持久化到硬盘中, 再重启时只需要重新加载即可。

**但是如何硬盘故障怎么办?**

所以我们应该尽量避免单点故障而导致Redis服务不可用的情况。

Redis单机部署一般存在3个问题:

1. 机器故障, 导致Redis不可用, 数据丢失

2. 容量瓶颈, 服务器内存不足, 硬盘容量不足

3. QPS瓶颈, 一台机器的处理能力, 网络贷款是有限的, 如果可以负载均衡, 可以有效的支持高QPS的场景。


为了解决单机Redis服务的局限性, Redis提供了主从复制功能, 实现了一份数据存在多个相同的副本, 这也是Redis高可用的基础。

### 1. 配置主从复制

默认情况下, Redis所有节点都是主节点, 节点与节点之间互不干涉。而主从复制的结构, 必须要存在从节点。一般主从复制的性质如下:

1. 主节点有一个或多个从节点

2. 每个从节点只能有一个主节点

3. 数据的复制只能从主节点复制到从节点, 所以不能在从节点上执行写操作。

