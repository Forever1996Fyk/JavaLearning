## <center>分布式系统的基础认识与理论</center>

> ## 为什么要用分布式?

分布式系统的代码根据业务拆分, 每个团队就可以负责一个服务的开发, 提高了开发的效率, 便于维护和扩展。每个服务都单独部署在一台服务器上, 提高了系统的性能。

> ## 分布式的目标与要素

**分布式系统的目标是提升系统的整体性能和吞吐量, 还要尽量保证分布式系统的容错性。**

即使采用分布式系统, 我们也要运用并发编程, 高性能网络框架等手段提升单机的程序性能。

> ## 分布式与集群的区别是什么?

- **分布式**: 一个业务拆分多个子业务, 部署在不同的服务器上。
- **集群**: 同一个业务, 部署在多个服务器上。例如 redis集群, solr集群。提交系统的性能, 并发量解决海量存储问题。

> ## CAP定理

- **一致性(Consistence)**: 所有节点访问同一份最新的数据副本
- **可用性(Availability)**: 每次请求都能获取非错的响应————但是不保证获取的数据为最新的数据
- **分区容错性(Partition tolerance)**: 分布式系统在遇到某节点或者网络分区故障时, 仍然能够对外提供满足一致性和可用性的服务。

**其中要注意的点, 当使用网络分区之后, 如果我们继续服务, 那么一致性和可用性只能2选1, 也就是说当网络分区之后, P是前提, 决定了P之后才会有C和A的选择。分区容错性我面试必须要实现的。**

> ## BASE理论

BASE理论核心思想是: 牺牲数据的一致性来满足系统的高可用, 系统中一部分数据不可能或者不一致时, 仍需要保持系统整体的"主要可能"。

### 1. 基本可用(Basically Available)

分布式系统在出现不可预知的故障时, 允许损失部分可用性。但是, 不等价于系统不可用。

### 2. 软状态(Soft-sate)

允许系统中的数据存在中间状态, 并认为该中间状态的存在不影响系统的整体可用性, 即允许系统在不同节点的数据副本之间进行数据同步的过程存在延迟。

### 3. 最终一致性(Eventually Consistent)

系统中所有的数据副本, 在经过一段时间的同步后, 最终能够达到一致的状态。也就是说, 最终一致性本质是需要系统保证最终数据能够达到一致, 而不需要实时保证系统数据的强一致性。